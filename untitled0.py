# -*- coding: utf-8 -*-
"""Untitled0.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1TITiftu00-_wJJZzc9Br2dIB8HwzHfMf
"""

import pandas as pd

df = pd.read_csv("https://media.githubusercontent.com/media/PTIT-Projects/ttcs-svm-spam-email/refs/heads/main/dataset/combined_data.csv")
# df = pd.read_csv("https://media.githubusercontent.com/media/PTIT-Projects/ttcs-svm-spam-email/refs/heads/main/dataset/sampled_dataset.csv")
print(df.shape)

target_column = 'label'  # Replace with the actual name of your target column
proportions = df[target_column].value_counts(normalize=True)

# Calculate the number of samples for each class
a = [5000, 7000, 10000, 15000, 20000, 25000, 30000, 35000, 40000, 45000, 50000, 55000, 60000, 65000, 70000, 75000, 80000]
for i in a:
  num_samples = i
  sample_counts = (proportions * num_samples).round().astype(int)

  # Sample the dataset
  sampled_df = pd.concat([
      df[df[target_column] == label].sample(n=count, random_state=42)
      for label, count in sample_counts.items()
  ])

  # Reset index if needed
  sampled_df.reset_index(drop=True, inplace=True)
  sampled_df.to_csv(f"dataset/sampled_dataset{i}.csv", index=False)
